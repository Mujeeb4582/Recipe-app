<section class="recipie-details">
  <h1 class="text-4xl"><%= @recipe.name%></h1>
  <div class="recipe-state">
    <% if can? :update, @recipe %>
      <%= button_to(@recipe.public? ? "Make Private" : "Make Public", toggle_recipe_privacy_path(@recipe), method: :put, class: "update-recipe") %>
    <% end %>
      <% if @recipe.public %>
        <span class="public">Public</span>
      <% else %>
        <span class="private">Private</span>
      <% end %>
  </div>
  <h2>
    <%= "Preparation time: #{@recipe.preparation_time} mins"%>
  </h2>

  <h3>
    <%= "Cooking time: #{@recipe.cooking_time} mins" %>
  </h3>
  <h4>Desciption</h4>
  <p>
    <%= @recipe.description %>
  </p>
  <div class='float-left mt-4 mb-4'>
    <button class='bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded'>
      <%= link_to "Generate shopping list" %>
    </button>
  </div>
  <% if can? :create, @recipe %>
    <div class='float-right mt-4 mb-4'>
      <button class='bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded'>
        <%= link_to "Add ingredient", new_user_recipe_recipe_food_path(@recipe.user, @recipe)%>
      </button>
    </div>
  <% end %>
<table>
    <thead>
      <tr>
        <th>Food</th>
        <th>Quantity</th>
        <th>Value</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @recipe.recipe_foods.includes(:food).each do |ingredient| %>
      <tr>
        <th><%= ingredient.food.name %></th>
        <td><%= ingredient.quantity %></td>
        <td>$ <%= ingredient.quantity* ingredient.food.price %></td>
        <td>
          <div class="d-flex justify-content-center gap-3">
            <%= button_to "Delete", user_recipe_recipe_food_path(@recipe.user, @recipe.id, ingredient.id), method: :delete, class: "btn btn-danger" %>
            <%= link_to "Edit", edit_user_recipe_recipe_food_path(@recipe.user, @recipe, ingredient), class: "btn btn-primary" %>
          </div>
        </td>
      </tr>
      <% end %>
      <tr>
  </tbody>
  </table>
</section>
